# Video Mover - å…¨è‡ªåŠ¨è§†é¢‘æ¬è¿ä¸å»é‡å·¥å…·

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ä¸€ä¸ªå¼ºå¤§çš„ã€å…¨è‡ªåŠ¨åŒ–çš„å†…å®¹åˆ›ä½œæµæ°´çº¿å·¥å…·ã€‚å®ƒå¯ä»¥**è‡ªåŠ¨ç›‘å¬ã€ä¸‹è½½æŒ‡å®šçš„TikTokåšä¸»è§†é¢‘**ï¼Œè¿›è¡Œæ·±åº¦ã€å¤šç»´åº¦çš„**è§†é¢‘å»é‡å¤„ç†**ï¼Œå¹¶åˆ©ç”¨**AIå¤§æ¨¡å‹ç”Ÿæˆçˆ†æ¬¾æ ‡é¢˜**ï¼Œæœ€ç»ˆ**è‡ªåŠ¨å‘å¸ƒ**åˆ°ä¸åŒå¹³å°ã€‚

---

> éœ€è¦è¿› **ã€çŸ­è§†é¢‘åˆ›ä½œæŠ€æœ¯äº¤æµç¾¤ã€‘** çš„æœ‹å‹å¯ä»¥åˆ°æœ€ä¸‹æ–¹è”ç³»æˆ‘ã€‚

### âœ¨ æ ¸å¿ƒåŠŸèƒ½çŸ©é˜µ

æœ¬é¡¹ç›®å°†å¤æ‚çš„è§†é¢‘å¤„ç†æµç¨‹é›†æˆä¸ºä¸‰å¤§è‡ªåŠ¨åŒ–æ¨¡å—ï¼š

#### ğŸ“¥ è‡ªåŠ¨ä¸‹è½½ (Auto-Download)
- **å®æ—¶ç›‘æ§**ï¼šè‡ªåŠ¨ç›‘å¬æŒ‡å®šTikTokåšä¸»çš„å‘å¸ƒçŠ¶æ€ã€‚
- **å³æ—¶ä¸‹è½½**ï¼šä¸€æ—¦å‘å¸ƒæ–°è§†é¢‘ï¼Œç«‹å³æ— æ°´å°ä¸‹è½½åˆ°æœ¬åœ°ï¼Œä¸ºåç»­å¤„ç†åšå‡†å¤‡ã€‚

#### âœ‚ï¸ æ™ºèƒ½å»é‡ (Intelligent Deduplication)
æä¾›ä¸€å¥—å¼ºå¤§çš„è§†é¢‘äºŒæ¬¡åˆ›ä½œå·¥å…·ç®±ï¼Œæ‰€æœ‰åŠŸèƒ½å‡å¯é…ç½®å’Œç»„åˆï¼Œä»¥è¾¾åˆ°ç†æƒ³çš„å»é‡æ•ˆæœï¼š

- **æ€§èƒ½ä¼˜åŒ–**ï¼š
  - **ğŸš€ GPUåŠ é€Ÿ**ï¼šåˆ©ç”¨NVIDIAæ˜¾å¡å¤§å¹…æå‡å¤„ç†é€Ÿåº¦ã€‚
- **å†…å®¹å¢å¼º**ï¼š
  - **ğŸ”Š è‡ªåŠ¨å­—å¹•**ï¼šæ™ºèƒ½è¯†åˆ«éŸ³é¢‘å¹¶ç”ŸæˆSRTå­—å¹•æ–‡ä»¶ã€‚
  - **âœï¸ è‡ªå®šä¹‰æ ‡é¢˜**ï¼šåœ¨è§†é¢‘é¡¶éƒ¨æˆ–åº•éƒ¨æ·»åŠ åŠ¨æ€æˆ–é™æ€æ ‡é¢˜ï¼Œæ”¯æŒè‡ªå®šä¹‰å­—ä½“ã€é¢œè‰²å’Œæè¾¹ã€‚
  - **ğŸµ èƒŒæ™¯éŸ³ä¹ (BGM)**ï¼šè‡ªåŠ¨æ·»åŠ æŒ‡å®šçš„èƒŒæ™¯éŸ³ä¹ï¼Œå¹¶è°ƒæ•´éŸ³é‡ã€‚
  - **ğŸ–¼ï¸ ç”»ä¸­ç”» (PIP)**ï¼šåœ¨ä¸»è§†é¢‘ä¸Šå åŠ å°çª—å£è§†é¢‘æˆ–å›¾ç‰‡ã€‚
- **è§†é¢‘å¤„ç†**ï¼š
  - **ğŸ”‡ é™éŸ³å‰ªè¾‘**ï¼šè‡ªåŠ¨æ£€æµ‹å¹¶ç§»é™¤è§†é¢‘ä¸­çš„é™éŸ³ç‰‡æ®µã€‚
  - **ğŸï¸ åŸºç¡€æ“ä½œ**ï¼šé•œåƒã€æ—‹è½¬ã€è£å‰ªã€æ·¡å…¥æ·¡å‡ºã€‚
  - **ğŸ¨ ç”»è´¨è°ƒæ•´**ï¼šé¥±å’Œåº¦ã€äº®åº¦ã€å¯¹æ¯”åº¦è°ƒèŠ‚ã€‚
  - **ğŸŒ€ è§†è§‰ç‰¹æ•ˆ**ï¼šèƒŒæ™¯æ¨¡ç³Šã€é«˜æ–¯æ¨¡ç³Šã€å¸§äº¤æ¢ã€é¢œè‰²åç§»ã€é¢‘åŸŸæ‰°ä¹±ã€çº¹ç†å™ªå£°ã€è¾¹ç¼˜æ¨¡ç³Šç­‰é«˜çº§ç‰¹æ•ˆã€‚

> å¯¹ **ABè§†é¢‘å»é‡å·¥å…·** æ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥ç§»æ­¥æˆ‘çš„å¦ä¸€ä¸ªé¡¹ç›®ï¼šhttps://github.com/toki-plus/AB-Video-Deduplicator
>

#### ğŸš€ AI é©±åŠ¨ä¸Šä¼  (AI-Powered Upload)
- **AIæ ‡é¢˜ç”Ÿæˆ**ï¼šè°ƒç”¨é˜¿é‡Œäº‘ç™¾ç‚¼AIå¤§æ¨¡å‹ï¼Œåˆ†æè§†é¢‘å†…å®¹ï¼Œè‡ªåŠ¨ç”Ÿæˆçˆ†æ¬¾æ ‡é¢˜å’Œæ ‡ç­¾ã€‚
- **è‡ªåŠ¨åŒ–å‘å¸ƒ**ï¼šæ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œï¼Œç™»å½•è§†é¢‘å·åå°ï¼Œè‡ªåŠ¨å¡«å†™æ‰€æœ‰ä¿¡æ¯å¹¶å‘å¸ƒè§†é¢‘ã€‚

### ğŸ¬ è§†é¢‘æ•™ç¨‹ (ç‚¹å‡»å›¾ç‰‡æ’­æ”¾ğŸ‘‡)

[![è§†é¢‘å°é¢](https://i2.hdslb.com/bfs/archive/678607430d704dfbe72183613c6aca60dcebb4fc.jpg@672w_378h_1c.avif)](https://www.bilibili.com/video/BV1txQeYyEEz)

### ğŸš€ å¿«é€Ÿä¸Šæ‰‹æŒ‡å— (Getting Started Guide)

è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œç¯å¢ƒé…ç½®å’Œå®‰è£…ã€‚

#### ç¬¬1æ­¥ï¼šç¯å¢ƒå‡†å¤‡ (Prerequisites)

è¯·ç¡®ä¿ä½ çš„ç³»ç»Ÿä¸­å·²å®‰è£…ä»¥ä¸‹æ‰€æœ‰è½¯ä»¶ï¼Œå¹¶**æ­£ç¡®é…ç½®äº†ç¯å¢ƒå˜é‡**ï¼ˆç‰¹åˆ«æ˜¯`ffmpeg`ï¼‰ã€‚

| è½¯ä»¶/å·¥å…·              | ä¸‹è½½é“¾æ¥                                                     | å¤‡æ³¨                                                     |
| :--------------------- | :----------------------------------------------------------- | :------------------------------------------------------- |
| **.NET Framework 4.8** | [å®˜æ–¹ä¸‹è½½](https://dotnet.microsoft.com/en-us/download/dotnet-framework/thank-you/net48-web-installer) | Windows ç³»ç»Ÿç»„ä»¶ã€‚                                       |
| **Python 3.12+**       | [å®˜æ–¹ä¸‹è½½](https://www.python.org/ftp/python/3.12.9/python-3.12.9-amd64.exe) | å®‰è£…æ—¶è¯·åŠ¡å¿…å‹¾é€‰ `Add Python to PATH`ã€‚                  |
| **Node.js 22.x**       | [å®˜æ–¹ä¸‹è½½](https://nodejs.org/dist/v22.14.0/node-v22.14.0-x64.msi) | å»ºè®®é€‰æ‹© LTS ç‰ˆæœ¬ã€‚                                      |
| **Git**                | [å®˜æ–¹ä¸‹è½½](https://git-scm.com/downloads/win)                | ç‰ˆæœ¬æ§åˆ¶å·¥å…·ã€‚                                           |
| **FFmpeg**             | [Gyan.dev Builds](https://github.com/GyanD/codexffmpeg/releases/download/7.1.1/ffmpeg-7.1.1-full_build.7z) | **å¿…é¡»**è§£å‹å¹¶å°†å…¶ `bin` ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ `PATH`ã€‚ |
| **Chrome æµè§ˆå™¨**      | [å®˜æ–¹ä¸‹è½½](https://www.google.com/)                          | ç”¨äºè‡ªåŠ¨åŒ–ä¸Šä¼ ã€‚                                         |
| **v2rayN** (å¯é€‰)      | [GitHub Releases](https://github.com/2dust/v2rayN/releases/download/5.39/v2rayN-Core.zip) | å¦‚æœä½ éœ€è¦ç½‘ç»œä»£ç†æ¥è®¿é—®TikTokã€‚                         |
| **VSCode** (æ¨è)      | [å®˜æ–¹ä¸‹è½½](https://code.visualstudio.com/Download)           | ç”¨äºä¿®æ”¹é…ç½®æ–‡ä»¶å’Œä»£ç ã€‚                                 |

#### ç¬¬2æ­¥ï¼šå®‰è£…ä¸é…ç½®

1.  **å…‹éš†æœ¬é¡¹ç›®**
    ```bash
    git clone https://github.com/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å.git
    cd ä½ çš„ä»“åº“å
    ```
2.  **è‡ªåŠ¨å®‰è£…ä¾èµ–**
    åŒå‡»è¿è¡Œé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `setup.bat` è„šæœ¬ã€‚å®ƒä¼šè‡ªåŠ¨å®‰è£…æ‰€æœ‰å¿…è¦çš„ Python å’Œ Node.js ä¾èµ–ã€‚

#### ç¬¬3æ­¥ï¼šâš ï¸ é‡è¦ï¼šæ‰‹åŠ¨ä¿®æ”¹ä¾èµ–åº“

ç”±äºç‰¹å®šåŠŸèƒ½éœ€æ±‚ï¼Œéƒ¨åˆ†å·²å®‰è£…çš„Pythonåº“éœ€è¦è¿›è¡Œå°‘é‡ä»£ç ä¿®æ”¹ã€‚**è¿™æ˜¯ä¿è¯ç¨‹åºæ­£å¸¸è¿è¡Œçš„å…³é”®æ­¥éª¤**ã€‚

1.  **ä¿®æ”¹ `f2/apps/tiktok/handler.py` æ–‡ä»¶**
    -   æ‰¾åˆ°ç¬¬ `389` è¡Œï¼Œå°† `cursor` å¼ºåˆ¶è½¬æ¢ä¸º `int` ç±»å‹ã€‚
    -   **ä¿®æ”¹å‰**: `cursor`
    -   **ä¿®æ”¹å**: `int(cursor)`

2.  **ä¿®æ”¹ `f2/utils/utils.py` æ–‡ä»¶**
    -   **å®šä½åˆ°ç¬¬ `200` è¡Œé™„è¿‘**ï¼Œä¿®æ”¹æ—¥æœŸå¤„ç†é€»è¾‘ä»¥å…¼å®¹ä¸åŒæ ¼å¼ã€‚
        ```python
        # å°†ä»¥ä¸‹ä»£ç å—:
        if date_type == "start":
            date_str = f"{start_date} 00-00-00"
        elif date_type == "end":
            date_str = f"{end_date} 23-59-59"
        # ...
        
        # æ›¿æ¢ä¸º:
        if len(start_date.split()) == 1:
            if date_type == "start":
                date_str = f"{start_date} 00-00-00"
            elif date_type == "end":
                date_str = f"{end_date} 23-59-59"
        else:
            if date_type == "start":
                date_str = f"{start_date}"
            elif date_type == "end":
                date_str = f"{end_date}"
        # ...
        ```
    -   **å®šä½åˆ°ç¬¬ `690` è¡Œé™„è¿‘**ï¼Œä¿®æ”¹æ—¥æœŸå­—ç¬¦ä¸²è§£æé€»è¾‘ã€‚
        ```python
        # å°†:
        start_date = datetime.datetime.strptime(start_str, "%Y-%m-%d")
        end_date = datetime.datetime.strptime(end_str, "%Y-%m-%d") + datetime.timedelta(...)

        # æ›¿æ¢ä¸º:
        if len(start_str.split()) == 1:
            start_date = datetime.datetime.strptime(start_str, "%Y-%m-%d")
        else:
            start_date = datetime.datetime.strptime(start_str, "%Y-%m-%d %H-%M-%S")
        if len(end_str.split()) == 1:
            end_date = datetime.datetime.strptime(end_str, "%Y-%m-%d") + datetime.timedelta(days=1, seconds=-1)
        else:
            end_date = datetime.datetime.strptime(end_str, "%Y-%m-%d %H-%M-%S")
        ```
3.  **ä¿®æ”¹ `tencent_uploader/main.py` æ–‡ä»¶**
    -   æ‰¾åˆ° `Upload/uploader/tencent_uploader/main.py` æ–‡ä»¶ã€‚
    -   **å®šä½åˆ°ç¬¬ `191` è¡Œé™„è¿‘**ï¼Œå»¶é•¿é¡µé¢ç­‰å¾…è¶…æ—¶æ—¶é—´ã€‚
        ```python
        # å°†:
        await page.wait_for_url(".../post/list", timeout=1500)
        
        # æ›¿æ¢ä¸º:
        await page.wait_for_url(".../post/list", timeout=10000)
        ```

#### ç¬¬4æ­¥ï¼šğŸ”‘ é…ç½®å¯†é’¥ä¸Cookie

1.  **é˜¿é‡Œäº‘ç™¾ç‚¼ API Key**
    -   å‰å¾€é˜¿é‡Œäº‘ç™¾ç‚¼å¤§æ¨¡å‹å¹³å°ç”³è¯· API Keyã€‚
    -   æ‰“å¼€ `Upload/vx_upload.py` æ–‡ä»¶ï¼Œå°†ä½ çš„ `api_key` å¡«å…¥ç›¸åº”ä½ç½®ã€‚
2.  **TikTok Cookie**
    -   åœ¨æµè§ˆå™¨ä¸­ç™»å½• TikTok ç½‘é¡µç‰ˆã€‚
    -   æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)ï¼Œæ‰¾åˆ°å¹¶å¤åˆ¶ `Cookie` å€¼ã€‚
    -   æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„ `my_apps.yaml` æ–‡ä»¶ï¼Œå°†å¤åˆ¶çš„ `Cookie` æ›¿æ¢æ‰åŸæœ‰å†…å®¹ã€‚
3.  **ç½‘ç»œä»£ç† (å¯é€‰)**
    -   å¦‚æœéœ€è¦ï¼Œåœ¨ `my_apps.yaml` æ–‡ä»¶ä¸­ä¿®æ”¹ `Proxy` é…ç½®é¡¹ã€‚

### â–¶ï¸ è¿è¡Œé¡¹ç›® (Running the Project)

1.  åŒå‡»è¿è¡Œæ ¹ç›®å½•ä¸‹çš„ `start.bat` è„šæœ¬ã€‚
2.  ç¨‹åºä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨å¹¶å¼€å§‹æ‰§è¡Œä»»åŠ¡ã€‚è¯·æ ¹æ®æç¤ºè¿›è¡Œç™»å½•ç­‰æ“ä½œã€‚
3.  åœ¨å¼€å‘è€…å·¥å…·ä¸­ï¼Œç‚¹å‡»ç»¿è‰²çš„ä¸‰è§’å½¢ç®­å¤´ï¼ˆé€šå¸¸æ˜¯ "Resume script execution"ï¼‰ä»¥ç»§ç»­æ‰§è¡Œè‡ªåŠ¨åŒ–æµç¨‹ã€‚

### ğŸ’¬ äº¤æµä¸æ”¯æŒ

å¦‚æœä½ å¸Œæœ›äº¤æµçŸ­è§†é¢‘åˆ›ä½œæŠ€æœ¯ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ã€‚

<table>
    <td align="center">
        <a href="https://llxoxll.com/">
            <img src="images/toki-plus.jpg" width="200px" alt="å¾®ä¿¡"/>
            <br />
            <sub><b>å¾®ä¿¡å…¥ç¾¤</b></sub>
        </a>
    </td>
    <td align="center">
        <a href="https://llxoxll.com/">
            <img src="images/yqkj.jpg" width="200px" alt="å…¬ä¼—å·"/>
            <br />
            <sub><b>å…¬ä¼—å·</b></sub>
        </a>
    </td>
    <td align="center">
        <a href="https://llxoxll.com/">
            <img src="images/zanzhu.jpg" width="200px" alt="èµèµç "/>
            <br />
            <sub><b>æ”¯æŒé¡¹ç›®</b></sub>
        </a>
    </td>
</table>
