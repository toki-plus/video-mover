# Video Mover: å…¨è‡ªåŠ¨è§†é¢‘æ¬è¿ã€å»é‡ä¸å‘å¸ƒå·¥ä½œæµ

[ç®€ä½“ä¸­æ–‡](./README.md) | [English](./README_en.md)

[![GitHub stars](https://img.shields.io/github/stars/toki-plus/video-mover?style=social)](https://github.com/toki-plus/video-mover/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/toki-plus/video-mover?style=social)](https://github.com/toki-plus/video-mover/network/members)
[![MIT License](https://img.shields.io/badge/License-MIT-green.svg)](https://choosealicense.com/licenses/mit/)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](https://github.com/toki-plus/video-mover/pulls)

**Video Mover æ˜¯ä¸€æ¬¾å¼ºå¤§çš„ã€å…¨è‡ªåŠ¨åŒ–çš„å†…å®¹åˆ›ä½œæµæ°´çº¿å·¥å…·ï¼Œæ—¨åœ¨å®ç°ä»è§†é¢‘æºç›‘æ§ä¸‹è½½ã€æ·±åº¦äºŒæ¬¡åˆ›ä½œåˆ°å¤šå¹³å°è‡ªåŠ¨å‘å¸ƒçš„æ— äººå€¼å®ˆå·¥ä½œæµã€‚**

æœ¬é¡¹ç›®ä¸ºéœ€è¦å¤§è§„æ¨¡ã€é«˜æ•ˆç‡è¿›è¡Œè§†é¢‘å†…å®¹åˆ†å‘å’ŒäºŒæ¬¡åˆ›ä½œçš„å›¢é˜ŸåŠä¸ªäººè®¾è®¡ï¼Œé€šè¿‡æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œå°†å¤æ‚çš„è§†é¢‘å¤„ç†æµç¨‹é›†æˆä¸ºä¸€å¥—å®Œæ•´çš„è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆã€‚

<p align="center">
  <a href="https://www.bilibili.com/video/BV1txQeYyEEz" target="_blank">
    <img src="./images/cover_demo.png" alt="ç‚¹å‡»è§‚çœ‹Bç«™æ¼”ç¤ºè§†é¢‘" width="800"/>
  </a>
  <br>
  <em>(ç‚¹å‡»å°é¢å›¾è·³è½¬åˆ° B ç«™è§‚çœ‹é«˜æ¸…æ¼”ç¤ºè§†é¢‘)</em>
</p>

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

-   **ğŸ“¥ è‡ªåŠ¨ä¸‹è½½ (Auto-Download)**
    -   **å®æ—¶ç›‘æ§**ï¼š7x24å°æ—¶è‡ªåŠ¨ç›‘å¬æŒ‡å®šTikTokåšä¸»çš„å‘å¸ƒçŠ¶æ€ã€‚
    -   **å³æ—¶ä¸‹è½½**ï¼šä¸€æ—¦å‘å¸ƒæ–°è§†é¢‘ï¼Œç«‹å³æ— æ°´å°ä¸‹è½½åˆ°æœ¬åœ°ï¼Œä¸ºåç»­å¤„ç†åšå‡†å¤‡ã€‚

-   **âœ‚ï¸ æ™ºèƒ½å»é‡ (Intelligent Deduplication)**
    -   æä¾›ä¸€å¥—å¼ºå¤§çš„è§†é¢‘äºŒæ¬¡åˆ›ä½œå·¥å…·ç®±ï¼Œæ‰€æœ‰åŠŸèƒ½å‡å¯é…ç½®å’Œç»„åˆï¼Œä»¥è¾¾åˆ°ç†æƒ³çš„å»é‡æ•ˆæœã€‚
    -   **æ€§èƒ½ä¼˜åŒ–**: **ğŸš€ GPUåŠ é€Ÿ**ï¼Œåˆ©ç”¨NVIDIAæ˜¾å¡å¤§å¹…æå‡å¤„ç†é€Ÿåº¦ã€‚
    -   **å†…å®¹å¢å¼º**: è‡ªåŠ¨å­—å¹•ã€è‡ªå®šä¹‰æ ‡é¢˜ã€èƒŒæ™¯éŸ³ä¹ (BGM)ã€ç”»ä¸­ç”» (PIP)ã€‚
    -   **è§†é¢‘å¤„ç†**: é™éŸ³å‰ªè¾‘ã€é•œåƒã€æ—‹è½¬ã€è£å‰ªã€æ·¡å…¥æ·¡å‡ºã€ç”»è´¨è°ƒæ•´ã€‚
    -   **é«˜çº§ç‰¹æ•ˆ**: èƒŒæ™¯æ¨¡ç³Šã€å¸§äº¤æ¢ã€é¢œè‰²åç§»ã€é¢‘åŸŸæ‰°ä¹±ã€çº¹ç†å™ªå£°ç­‰æ•°åç§è§†è§‰ç‰¹æ•ˆã€‚

-   **ğŸš€ AI é©±åŠ¨ä¸Šä¼  (AI-Powered Upload)**
    -   **AIæ ‡é¢˜ç”Ÿæˆ**ï¼šè°ƒç”¨é˜¿é‡Œäº‘ç™¾ç‚¼AIå¤§æ¨¡å‹ï¼Œåˆ†æè§†é¢‘å†…å®¹ï¼Œè‡ªåŠ¨ç”Ÿæˆçˆ†æ¬¾æ ‡é¢˜å’Œæ ‡ç­¾ã€‚
    -   **è‡ªåŠ¨åŒ–å‘å¸ƒ**ï¼šæ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œï¼Œç™»å½•è§†é¢‘å·åå°ï¼Œè‡ªåŠ¨å¡«å†™æ‰€æœ‰ä¿¡æ¯å¹¶å‘å¸ƒè§†é¢‘ã€‚

## ğŸ“¸ è½¯ä»¶æˆªå›¾

<p align="center">
  <img src="./images/cover_script.png" alt="è½¯ä»¶ä¸»ç•Œé¢" width="800"/>
  <br>
  <em>è„šæœ¬è¿è¡Œå±•ç¤ºå›¾ã€‚</em>
</p>

## ğŸš€ å¿«é€Ÿå¼€å§‹

è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œç¯å¢ƒé…ç½®å’Œå®‰è£…ã€‚

### ç³»ç»Ÿè¦æ±‚

1.  **æ“ä½œç³»ç»Ÿ**: Windowsã€‚
2.  **è½¯ä»¶/å·¥å…·**:
    | è½¯ä»¶/å·¥å…·              | ä¸‹è½½é“¾æ¥                                                     | å¤‡æ³¨                                                     |
    | :--------------------- | :----------------------------------------------------------- | :------------------------------------------------------- |
    | **.NET Framework 4.8** | [å®˜æ–¹ä¸‹è½½](https://dotnet.microsoft.com/en-us/download/dotnet-framework/thank-you/net48-web-installer) | Windows ç³»ç»Ÿç»„ä»¶ã€‚                                       |
    | **Python 3.12+**       | [å®˜æ–¹ä¸‹è½½](https://www.python.org/ftp/python/3.12.9/python-3.12.9-amd64.exe) | å®‰è£…æ—¶è¯·åŠ¡å¿…å‹¾é€‰ `Add Python to PATH`ã€‚                  |
    | **Node.js 22.x**       | [å®˜æ–¹ä¸‹è½½](https://nodejs.org/dist/v22.14.0/node-v22.14.0-x64.msi) | å»ºè®®é€‰æ‹© LTS ç‰ˆæœ¬ã€‚                                      |
    | **Git**                | [å®˜æ–¹ä¸‹è½½](https://git-scm.com/downloads/win)                | ç‰ˆæœ¬æ§åˆ¶å·¥å…·ã€‚                                           |
    | **FFmpeg**             | [Gyan.dev Builds](https://github.com/GyanD/codexffmpeg/releases/download/7.1.1/ffmpeg-7.1.1-full_build.7z) | **å¿…é¡»**è§£å‹å¹¶å°†å…¶ `bin` ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ `PATH`ã€‚ |
    | **Chrome æµè§ˆå™¨**      | [å®˜æ–¹ä¸‹è½½](https://www.google.com/)                          | ç”¨äºè‡ªåŠ¨åŒ–ä¸Šä¼ ã€‚                                         |
    | **v2rayN** (å¯é€‰)      | [GitHub Releases](https://github.com/2dust/v2rayN/releases/download/5.39/v2rayN-Core.zip) | å¦‚æœä½ éœ€è¦ç½‘ç»œä»£ç†æ¥è®¿é—®TikTokã€‚                         |

### å®‰è£…ä¸é…ç½®

1.  **å…‹éš†æœ¬ä»“åº“ï¼š**
    ```bash
    git clone https://github.com/toki-plus/video-mover.git
    cd video-mover
    ```

2.  **è‡ªåŠ¨å®‰è£…ä¾èµ–ï¼š**
    åŒå‡»è¿è¡Œé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `setup.bat` è„šæœ¬ã€‚å®ƒä¼šè‡ªåŠ¨å®‰è£…æ‰€æœ‰å¿…è¦çš„ Python å’Œ Node.js ä¾èµ–ã€‚

3.  **âš ï¸ é‡è¦ï¼šæ‰‹åŠ¨ä¿®æ”¹ä¾èµ–åº“**
    ç”±äºç‰¹å®šåŠŸèƒ½éœ€æ±‚ï¼Œéƒ¨åˆ†å·²å®‰è£…çš„Pythonåº“éœ€è¦è¿›è¡Œå°‘é‡ä»£ç ä¿®æ”¹ã€‚**è¿™æ˜¯ä¿è¯ç¨‹åºæ­£å¸¸è¿è¡Œçš„å…³é”®æ­¥éª¤**ã€‚è¯·åœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ‰¾åˆ°å¯¹åº”æ–‡ä»¶å¹¶ä¿®æ”¹ï¼š

    -   **æ–‡ä»¶ 1**: `f2/apps/tiktok/handler.py`
        -   **ä½ç½®**: ç¬¬ `389` è¡Œ
        -   **æ“ä½œ**: å°† `cursor` å¼ºåˆ¶è½¬æ¢ä¸º `int` ç±»å‹ã€‚
        -   **ä¿®æ”¹å‰**: `params={"cursor": cursor, ...}`
        -   **ä¿®æ”¹å**: `params={"cursor": int(cursor), ...}`

    -   **æ–‡ä»¶ 2**: `f2/utils/utils.py`
        -   **ä½ç½®**: ç¬¬ `200` è¡Œé™„è¿‘
        -   **æ“ä½œ**: ä¿®æ”¹æ—¥æœŸå¤„ç†é€»è¾‘ä»¥å…¼å®¹ä¸åŒæ ¼å¼ã€‚
            ```python
            # å°†ä»¥ä¸‹ä»£ç å—:
            if date_type == "start":
                date_str = f"{start_date} 00-00-00"
            elif date_type == "end":
                date_str = f"{end_date} 23-59-59"

            # æ›¿æ¢ä¸º:
            if len(start_date.split()) == 1:
                if date_type == "start":
                    date_str = f"{start_date} 00-00-00"
                elif date_type == "end":
                    date_str = f"{end_date} 23-59-59"
            else:
                if date_type == "start":
                    date_str = f"{start_date}"
                elif date_type == "end":
                    date_str = f"{end_date}"
            ```
        -   **ä½ç½®**: ç¬¬ `690` è¡Œé™„è¿‘
        -   **æ“ä½œ**: ä¿®æ”¹æ—¥æœŸå­—ç¬¦ä¸²è§£æé€»è¾‘ã€‚
            ```python
            # å°†:
            start_date = datetime.datetime.strptime(start_str, "%Y-%m-%d")
            end_date = datetime.datetime.strptime(end_str, "%Y-%m-%d") + datetime.timedelta(...)

            # æ›¿æ¢ä¸º:
            if len(start_str.split()) == 1:
                start_date = datetime.datetime.strptime(start_str, "%Y-%m-%d")
            else:
                start_date = datetime.datetime.strptime(start_str, "%Y-%m-%d %H-%M-%S")
            if len(end_str.split()) == 1:
                end_date = datetime.datetime.strptime(end_str, "%Y-%m-%d") + datetime.timedelta(days=1, seconds=-1)
            else:
                end_date = datetime.datetime.strptime(end_str, "%Y-%m-%d %H-%M-%S")
            ```
    -   **æ–‡ä»¶ 3**: `tencent_uploader/main.py`
        -   **ä½ç½®**: ç¬¬ `191` è¡Œé™„è¿‘
        -   **æ“ä½œ**: å»¶é•¿é¡µé¢ç­‰å¾…è¶…æ—¶æ—¶é—´ã€‚
        -   **ä¿®æ”¹å‰**: `await page.wait_for_url(".../post/list", timeout=1500)`
        -   **ä¿®æ”¹å**: `await page.wait_for_url(".../post/list", timeout=10000)`

4.  **é…ç½®å¯†é’¥ä¸Cookie**
    -   **é˜¿é‡Œäº‘ç™¾ç‚¼ API Key**: å‰å¾€é˜¿é‡Œäº‘ç™¾ç‚¼å¤§æ¨¡å‹å¹³å°ç”³è¯· API Keyï¼Œç„¶åæ‰“å¼€ `Upload/vx_upload.py` æ–‡ä»¶ï¼Œå°†ä½ çš„ `api_key` å¡«å…¥ã€‚
    -   **TikTok Cookie**: åœ¨æµè§ˆå™¨ä¸­ç™»å½• TikTok ç½‘é¡µç‰ˆï¼Œæ‰“å¼€å¼€å‘è€…å·¥å…·(F12)å¤åˆ¶ `Cookie` å€¼ï¼Œç„¶åæ‰“å¼€æ ¹ç›®å½•ä¸‹çš„ `my_apps.yaml` æ–‡ä»¶æ›¿æ¢åŸæœ‰å†…å®¹ã€‚
    -   **ç½‘ç»œä»£ç† (å¯é€‰)**: åœ¨ `my_apps.yaml` æ–‡ä»¶ä¸­ä¿®æ”¹ `Proxy` é…ç½®é¡¹ã€‚

## ğŸ“– ä½¿ç”¨æŒ‡å—

1.  åŒå‡»è¿è¡Œæ ¹ç›®å½•ä¸‹çš„ `start.bat` è„šæœ¬ã€‚
2.  ç¨‹åºä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨å¹¶å¼€å§‹æ‰§è¡Œä»»åŠ¡ã€‚è¯·æ ¹æ®æç¤ºè¿›è¡Œç™»å½•ç­‰æ“ä½œã€‚
3.  åœ¨å¼€å‘è€…å·¥å…·ä¸­ï¼Œç‚¹å‡»ç»¿è‰²çš„ä¸‰è§’å½¢ç®­å¤´ï¼ˆé€šå¸¸æ˜¯ "Resume script execution"ï¼‰ä»¥ç»§ç»­æ‰§è¡Œè‡ªåŠ¨åŒ–æµç¨‹ã€‚

---

<p align="center">
  <strong>æŠ€æœ¯äº¤æµï¼Œè¯·æ·»åŠ ï¼š</strong>
</p>
<table align="center">
  <tr>
    <td align="center">
      <img src="./images/wechat.png" alt="å¾®ä¿¡äºŒç»´ç " width="200"/>
      <br />
      <sub><b>ä¸ªäººå¾®ä¿¡</b></sub>
      <br />
      <sub>å¾®ä¿¡å·: toki-plus (è¯·å¤‡æ³¨â€œGitHub å®šåˆ¶â€)</sub>
    </td>
    <td align="center">
      <img src="./images/gzh.png" alt="å…¬ä¼—å·äºŒç»´ç " width="200"/>
      <br />
      <sub><b>å…¬ä¼—å·</b></sub>
      <br />
      <sub>è·å–æœ€æ–°æŠ€æœ¯åˆ†äº«ä¸é¡¹ç›®æ›´æ–°</sub>
    </td>
  </tr>
</table>

## ğŸ“‚ æˆ‘çš„å…¶ä»–å¼€æºé¡¹ç›®

-   **[AI Highlight Clip](https://github.com/toki-plus/ai-highlight-clip)**: ä¸€æ¬¾AIé©±åŠ¨çš„æ™ºèƒ½å‰ªè¾‘å·¥å…·ï¼Œèƒ½å¤Ÿå…¨è‡ªåŠ¨åœ°ä»é•¿è§†é¢‘ä¸­åˆ†æã€å‘ç°å¹¶å‰ªè¾‘å‡ºå¤šä¸ªâ€œé«˜å…‰æ—¶åˆ»â€çŸ­è§†é¢‘ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆçˆ†æ¬¾æ ‡é¢˜ã€‚
-   **[AI TTV Workflow](https://github.com/toki-plus/ai-ttv-workflow)**: ä¸€æ¬¾AIé©±åŠ¨çš„æ–‡æœ¬è½¬è§†é¢‘å·¥å…·ï¼Œèƒ½å°†ä»»æ„æ–‡æ¡ˆè‡ªåŠ¨è½¬åŒ–ä¸ºå¸¦æœ‰é…éŸ³ã€å­—å¹•å’Œå°é¢çš„çŸ­è§†é¢‘ï¼Œæ”¯æŒAIæ–‡æ¡ˆæå–ã€äºŒåˆ›å’Œç¿»è¯‘ã€‚
-   **[AB è§†é¢‘å»é‡å·¥å…·](https://github.com/toki-plus/AB-Video-Deduplicator)**: é€šè¿‡åˆ›æ–°çš„â€œé«˜å¸§ç‡æŠ½å¸§æ··åˆâ€æŠ€æœ¯ï¼Œä»æ ¹æœ¬ä¸Šé‡æ„è§†é¢‘æ•°æ®æŒ‡çº¹ï¼Œä»¥è§„é¿ä¸»æµçŸ­è§†é¢‘å¹³å°çš„åŸåˆ›åº¦æ£€æµ‹å’ŒæŸ¥é‡æœºåˆ¶ã€‚

## ğŸ¤ å‚ä¸è´¡çŒ®

æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼å¦‚æœä½ æœ‰æ–°çš„åŠŸèƒ½ç‚¹å­ã€å‘ç°äº†Bugï¼Œæˆ–è€…æœ‰ä»»ä½•æ”¹è¿›å»ºè®®ï¼Œè¯·ï¼š
-   æäº¤ä¸€ä¸ª [Issue](https://github.com/toki-plus/video-mover/issues) è¿›è¡Œè®¨è®ºã€‚
-   Fork æœ¬ä»“åº“å¹¶æäº¤ [Pull Request](https://github.com/toki-plus/video-mover/pulls)ã€‚

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ä¸åç‚¹äº®ä¸€é¢— â­ï¼

## ğŸ“œ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäº MIT åè®®å¼€æºã€‚è¯¦æƒ…è¯·è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚
